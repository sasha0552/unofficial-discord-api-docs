{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>Some Discord API documentation from the reverse engineered Discord client build as of 2023-01-01 (Stable 165485)</p> <p>My goal is build fully discord-compatible backend (because I can't do frontend), to use as my own messenger.  </p> <p>If you want to help me in the reverse engeenering, I can give you an entire client build (I wrote some tools for downloading discord client from discord.com, so client can be used completely offline), and access to backend API for testing. Also, if you have any questions about discord client/backend, you can also contact me. And I'll try to answer.  </p> <p>You can contact me in Discord: My username#discriminator: <code>sasha0552#5178</code>. Also, I created guild for this.  </p> <p> </p>"},{"location":"related-projects/","title":"Related projects","text":"URL Description discord-dl Utility to download current or past discord client build. discord-extract-constants Utility to extract constants such as protobuf files, api routes, gateway events from discord assets. webpatch Utility to extract and/or patch webpack modules."},{"location":"backend/api/","title":"API","text":""},{"location":"backend/api/#api-routes","title":"API routes","text":"Name Path Methods Description ACTIVITIES /activities ACTIVITY_ENABLE_WTP /activities/guilds/{0}/enable-wtp ACTIVITY_GUILD_SHELF /activities/guilds/{0}/shelf ACTIVITY_GUILD_LAUNCH /activities/guilds/{0}/{1}/{2} APPLICATION_ACTIVITY_STATISTICS /activities/statistics/applications/{0} ACTIVITY_TEST_MODE /activities/{0}/test-mode APPLICATION_DIRECTORY_RECOMMENDED /application-directory/applications/recommended APPLICATION_DIRECTORY_APPLICATION /application-directory/applications/{0} APPLICATION_DIRECTORY_SIMILAR /application-directory/applications/{0}/similar APPLICATION_DIRECTORY_CATEGORIES /application-directory/categories APPLICATION_DIRECTORY_COLLECTION_ITEM_IMAGE /application-directory/collection-items/{0}/{1}.{2} APPLICATION_DIRECTORY_COLLECTIONS /application-directory/collections APPLICATION_DIRECTORY_SEARCH /application-directory/search APPLICATIONS /applications APPLICATIONS_DETECTABLE /applications/detectable APPLICATIONS_PUBLIC /applications/public APPLICATIONS_TRENDING /applications/trending/global APPLICATION_ICON /applications/{0}/app-icons/{1}.png OWNED_APPLICATION_BRANCHES /applications/{0}/branches APPLICATION_BRANCH_LIST /applications/{0}/branches APPLICATION_LIVE_BUILD /applications/{0}/branches/{1}/builds/live APPLICATION_BUILD_SIZE /applications/{0}/branches/{1}/builds/{2}/size APPLICATION_STORAGE /applications/{0}/branches/{1}/storage APPLICATION_EXTERNAL_ASSETS /applications/{0}/external-assets APPLICATION_BOT_GUILD_COMMAND_PERMISSIONS /applications/{0}/guilds/{1}/commands/{2}/permissions PAYMENT_PAYOUT_GROUPS /applications/{0}/payment-payout-groups APPLICATION_PUBLIC /applications/{0}/public APPLICATION_SKUS /applications/{0}/skus APPLICATION_SUBSCRIPTION_GROUP_LISTING /applications/{0}/subscription-group-listings/{1} MESSAGE_DELETE_UPLOAD /attachments/{0} AUTHORIZE_IP /auth/authorize-ip FORGOT_PASSWORD /auth/forgot HANDOFF /auth/handoff HANDOFF_EXCHANGE /auth/handoff/exchange AUTH_LOCATION_METADATA /auth/location-metadata LOGIN /auth/login LOGOUT /auth/logout LOGIN_SMS /auth/mfa/sms LOGIN_SMS_SEND /auth/mfa/sms/send LOGIN_MFA /auth/mfa/totp LOGIN_WEBAUTHN /auth/mfa/webauthn REGISTER /auth/register REGISTER_PHONE /auth/register/phone RESET_PASSWORD /auth/reset AUTH_SESSIONS /auth/sessions AUTH_SESSION_NOTIFICATIONS_DEBUG /auth/sessions/debug/notifications AUTH_SESSIONS_LOGOUT /auth/sessions/logout VERIFY /auth/verify VERIFY_RESEND /auth/verify/resend MFA_SEND_VERIFICATION_KEY /auth/verify/view-backup-codes-challenge BILLING_APPLY_APPLE_RECEIPT /billing/apple/apply-receipt BILLING_CREATE_APPLE_IAP_JWT_TOKEN /billing/apple/jwt-token BILLING_POPUP_BRIDGE /billing/popup-bridge/{0} BILLING_POPUP_BRIDGE_CALLBACK /billing/popup-bridge/{0}/callback BILLING_POPUP_BRIDGE_CALLBACK_REDIRECT_PREFIX /billing/popup-bridge/{0}/callback/{1}/{2} AUTHORIZE_PAYMENT /billing/verify-purchase-request APPLICATION_BRANCHES /branches CALLSCOPE_LOGS /callscope/logs/{0}/user/{1}/%7B2%7D CHANNELS /channels STAFF_ONLY_PRELOAD_MESSAGES /channels/preload-messages CHANNEL /channels/{0} APPLICATION_COMMANDS_SEARCH /channels/{0}/application-commands/search MESSAGE_CREATE_ATTACHMENT_UPLOAD /channels/{0}/attachments CALL /channels/{0}/call CALL_RING /channels/{0}/call/ring CALL_STOP_RINGING /channels/{0}/call/stop-ringing CHANNEL_CONVERT /channels/{0}/convert DIRECTORY_CHANNEL_ENTRIES /channels/{0}/directory-entries DIRECTORY_CHANNEL_CATEGORY_COUNTS /channels/{0}/directory-entries/counts DIRECTORY_CHANNEL_LIST_BY_ID /channels/{0}/directory-entries/list DIRECTORY_ENTRIES_SEARCH /channels/{0}/directory-entries/search DIRECTORY_CHANNEL_ENTRY /channels/{0}/directory-entry/{1} CHANNEL_FOLLOWER_MESSAGE_STATS /channels/{0}/follower-message-stats CHANNEL_FOLLOWER_STATS /channels/{0}/follower-stats CHANNEL_FOLLOWERS /channels/{0}/followers MESSAGES_GREET /channels/{0}/greet CHANNEL_ICON /channels/{0}/icons/{1}.jpg INSTANT_INVITES /channels/{0}/invites MESSAGES /channels/{0}/messages CHANNEL_ACK /channels/{0}/messages/ack SEARCH_CHANNEL /channels/{0}/messages/search MESSAGE /channels/{0}/messages/{1} MESSAGE_ACK /channels/{0}/messages/{1}/ack MESSAGE_CROSSPOST /channels/{0}/messages/{1}/crosspost GUILD_FEED_MESSAGE_REMOVE /channels/{0}/messages/{1}/hide-guild-feed MESSAGE_INTERACTION_DATA /channels/{0}/messages/{1}/interaction-data REMOVE_REACTIONS /channels/{0}/messages/{1}/reactions REACTIONS /channels/{0}/messages/{1}/reactions/{2} REACTION /channels/{0}/messages/{1}/reactions/{2}/{3} CHANNEL_MESSAGE_THREADS /channels/{0}/messages/{1}/threads CHANNEL_PERMISSIONS /channels/{0}/permissions CHANNEL_PERMISSIONS_OVERWRITE /channels/{0}/permissions/{1} PINS /channels/{0}/pins PINS_ACK /channels/{0}/pins/ack PIN /channels/{0}/pins/{1} FORUM_POSTS /channels/{0}/post-data CHANNEL_RECIPIENTS /channels/{0}/recipients CHANNEL_RECIPIENT_CONSENT /channels/{0}/recipients/@me CHANNEL_RECIPIENT /channels/{0}/recipients/{1} CHANNEL_STORE_LISTING /channels/{0}/store-listing CHANNEL_ENTITLEMENT_GRANT /channels/{0}/store-listing/entitlement-grant CHANNEL_STORE_LISTING_SKU /channels/{0}/store-listings/{1} FORUM_TAGS /channels/{0}/tags FORUM_TAG /channels/{0}/tags/{1} THREAD_MEMBER_SETTINGS /channels/{0}/thread-members/@me/settings THREAD_MEMBER /channels/{0}/thread-members/{1} CHANNEL_THREADS /channels/{0}/threads ALL_ARCHIVED_THREADS /channels/{0}/threads/archived/{1} THREAD_SEARCH /channels/{0}/threads/search TYPING /channels/{0}/typing MY_ARCHIVED_THREADS /channels/{0}/users/@me/threads/archived/private VOICE_CHANNEL_EFFECTS /channels/{0}/voice-channel-effects CHANNEL_WEBHOOKS /channels/{0}/webhooks CONNECTIONS_AUTHORIZE /connections/{0}/authorize CONNECTIONS_AUTHORIZE_CONTINUATION /connections/{0}/authorize?continuation=true CONNECTIONS_AUTHORIZE_LINK_DEVICE /connections/{0}/authorize?two_way_link=true&amp;two_way_link_type=device_code&amp;two_way_user_code={1} CONNECTIONS_AUTHORIZE_LINK /connections/{0}/authorize?two_way_link=true&amp;two_way_link_type={1} CONNECTIONS_CALLBACK /connections/{0}/callback CONNECTIONS_CALLBACK_CONTINUATION /connections/{0}/callback-continuation/{1} CONNECTIONS_LINK_DISPATCH_AUTH_CALLBACK /connections/{0}/link-dispatch-auth-callback CONNECT_REQUEST_CREATE /consoles/connect-request CONNECT_REQUEST /consoles/connect-request/{0} XBOX_HANDOFF /consoles/xbox-handoff DEBUG_LOGS /debug-logs/multi/{0} DEBUG_LOG /debug-logs/{0}/{1} GUILD_DISCOVERY /discoverable-guilds GUILD_DISCOVERY_CATEGORIES /discovery/categories GUILD_DISCOVERY_VALID_TERM /discovery/valid-term GUILD_DISCOVERY_SLUG /discovery/{0} DROPS_USER_STATUS /drops/@me DROPS_ELIGIBILITY /drops/eligibility DROPS_ENROLL_USER /drops/enrolled-user DROPS_QUEST_HEARTBEAT /drops/quests/{0}/progress DROPS_REWARD_CODE /drops/reward-code DROPS_PLATFORM_AVAILABILITY /drops/reward-code/availability DROPS_CLAIM_REWARD_CODE /drops/reward-code/claim EMOJI /emojis/{0}.{1} EMOJI_GUILD_DATA /emojis/{0}/guild GIFT_CODE_RESOLVE /entitlements/gift-codes/{0} GIFT_CODE_REDEEM /entitlements/gift-codes/{0}/redeem EXPERIMENTS /experiments FRIEND_SUGGESTIONS /friend-suggestions FRIEND_SUGGESTION /friend-suggestions/{0} GIFS_SEARCH /gifs/search GIFS_SELECT /gifs/select GIFS_SUGGEST /gifs/suggest GIFS_TRENDING /gifs/trending GIFS_TRENDING_GIFS /gifs/trending-gifs GIFS_TRENDING_SEARCH /gifs/trending-search DOWNGRADE_SUBSCRIPTION /google-play/downgrade-subscription VERIFY_PURCHASE /google-play/verify-purchase-token GUILD_EVENTS /guild-events GUILD_EVENT_IMAGE /guild-events/{0}/images/{1}.{2} GUILD_RECOMMENDATIONS /guild-recommendations GUILDS /guilds HUB_EMAIL_VERIFY_SEND /guilds/automations/email-domain-lookup HUB_EMAIL_VERIFY /guilds/automations/email-domain-lookup/verify HUB_EMAIL_VERIFY_CODE /guilds/automations/email-domain-lookup/verify-code UNRESOLVED_GUILD_TEMPLATE /guilds/templates/{0} GUILD /guilds/{0} GUILD_FEATURE_ACK /guilds/{0}/ack/{2}/{1} ACTIVE_CHANNELS /guilds/{0}/active-channels GUILD_ADMIN_SERVER_ELIGIBILITY /guilds/{0}/admin-server-eligibility GUILD_ANALYTICS_ENGAGEMENT_OVERVIEW /guilds/{0}/analytics/engagement/overview GUILD_ANALYTICS_GROWTH_ACTIVATION_OVERVIEW /guilds/{0}/analytics/growth-activation/overview GUILD_ANALYTICS_GROWTH_ACTIVATION_RETENTION /guilds/{0}/analytics/growth-activation/retention GUILD_ANALYTICS_MEMBER_INSIGHTS /guilds/{0}/analytics/member-insights GUILD_ANALYTICS_OVERVIEW /guilds/{0}/analytics/overview GUILD_COMMANDS_FOR_APPLICATION /guilds/{0}/application-commands/{1} GUILD_APPLICATIONS /guilds/{0}/applications GUILD_AUDIT_LOG /guilds/{0}/audit-logs GUILD_AUTOMOD_RULES /guilds/{0}/auto-moderation/rules GUILD_AUTOMOD_VALIDATE_RULE /guilds/{0}/auto-moderation/rules/validate GUILD_AUTOMOD_RULE /guilds/{0}/auto-moderation/rules/{1} GUILD_BANNER /guilds/{0}/banners/{1}.{2} GUILD_BANS /guilds/{0}/bans GUILD_BAN /guilds/{0}/bans/{1} CHANNEL_HIGHLIGHTS /guilds/{0}/channel-highlights GUILD_CHANNELS /guilds/{0}/channels CREATOR_MONETIZATION_ACCEPT_TERMS_V2 /guilds/{0}/creator-monetization/accept-terms CREATOR_MONETIZATION_ENABLE_REQUESTS /guilds/{0}/creator-monetization/enable-requests CREATOR_MONETIZATION_ACCEPT_TERMS /guilds/{0}/creator-monetization/enable-requests/{1}/accept-terms CREATOR_MONETIZATION_MARKETING_ONBOARDING /guilds/{0}/creator-monetization/marketing/onboarding CREATOR_MONETIZATION_ELIGIBILITY /guilds/{0}/creator-monetization/requirements CREATOR_MONETIZATION_RESTRICTIONS /guilds/{0}/creator-monetization/restrictions GUILD_DELETE /guilds/{0}/delete DIRECTORY_ENTRIES_BROADCAST_INFO /guilds/{0}/directory-entries/broadcast GUILD_DISCOVERY_UPDATE_CATEGORY /guilds/{0}/discovery-categories/{1} GUILD_DISCOVERY_CHECKLIST /guilds/{0}/discovery-checklist GUILD_DISCOVERY_METADATA /guilds/{0}/discovery-metadata GUILD_DISCOVERY_REQUIREMENTS /guilds/{0}/discovery-requirements GUILD_DISCOVERY_SPLASH /guilds/{0}/discovery-splashes/{1}.jpg GUILD_EMOJIS /guilds/{0}/emojis GUILD_EMOJI /guilds/{0}/emojis/{1} GUILD_ENTITLEMENTS /guilds/{0}/entitlements GUILD_FEED /guilds/{0}/guild-feed GUILD_FEED_FEATURE_ITEM /guilds/{0}/guild-feed/feature GUILD_FEED_MARK_SEEN /guilds/{0}/guild-feed/mark-seen GUILD_FEED_MESSAGE_SET_PREFERENCE /guilds/{0}/guild-feed/preference GUILD_HOME_HEADER /guilds/{0}/home-headers/{1}.jpg GUILD_ICON /guilds/{0}/icons/{1}.{2} GUILD_INTEGRATIONS /guilds/{0}/integrations GUILD_INTEGRATION /guilds/{0}/integrations/{1} GUILD_INTEGRATION_SYNC /guilds/{0}/integrations/{1}/sync GUILD_INSTANT_INVITES /guilds/{0}/invites JOIN_ADMIN_SERVER /guilds/{0}/join-admin-server GUILD_MEMBER_VERIFICATION /guilds/{0}/member-verification GUILD_MEMBERS /guilds/{0}/members SET_GUILD_MEMBER /guilds/{0}/members/@me GUILD_JOIN /guilds/{0}/members/@me GUILD_MEMBER /guilds/{0}/members/{1} GUILD_MEMBER_NICK /guilds/{0}/members/{1}/nick SEARCH_GUILD /guilds/{0}/messages/search GUILD_MFA /guilds/{0}/mfa GUILD_MIGRATE_COMMAND_SCOPE /guilds/{0}/migrate-command-scope GUILD_ONBOARDING /guilds/{0}/onboarding GUILD_ONBOARDING_PROMPT /guilds/{0}/onboarding-prompts/{1} GUILD_ONBOARDING_RESPONSES /guilds/{0}/onboarding-responses APPLIED_GUILD_BOOSTS_FOR_GUILD /guilds/{0}/premium/subscriptions APPLIED_GUILD_BOOST /guilds/{0}/premium/subscriptions/{1} GUILD_PREVIEW /guilds/{0}/preview GUILD_PROFILE /guilds/{0}/profile/{1} GUILD_PRUNE /guilds/{0}/prune REGIONS /guilds/{0}/regions GUILD_JOIN_REQUESTS /guilds/{0}/requests GUILD_MEMBER_REQUEST_TO_JOIN /guilds/{0}/requests/@me GUILD_JOIN_REQUEST /guilds/{0}/requests/{1} GUILD_JOIN_REQUEST_ACK /guilds/{0}/requests/{1}/ack GUILD_ROLE_SUBSCRIPTION_GROUP_LISTINGS /guilds/{0}/role-subscriptions/group-listings/{1} GUILD_ROLE_SUBSCRIPTION_LISTINGS /guilds/{0}/role-subscriptions/group-listings/{1}/subscription-listings/{2} GUILD_ROLE_SUBSCRIPTIONS_SETTINGS /guilds/{0}/role-subscriptions/settings GUILD_ROLE_SUBSCRIPTION_LISTING_TRIAL /guilds/{0}/role-subscriptions/subscription-listings/{1}/trial GUILD_ROLE_SUBSCRIPTION_TRIAL_ELIGIBILITY /guilds/{0}/role-subscriptions/subscription-listings/{1}/trial/{2}/eligibility GUILD_ROLE_SUBSCRIPTION_TRIALS /guilds/{0}/role-subscriptions/trials GUILD_ROLES /guilds/{0}/roles GUILD_ROLE_CONNECTIONS_CONFIGURATIONS /guilds/{0}/roles/connections-configurations GUILD_ROLE_MEMBER_COUNTS /guilds/{0}/roles/member-counts GUILD_ROLE /guilds/{0}/roles/{1} GUILD_ROLE_CONNECTIONS_ASSIGN /guilds/{0}/roles/{1}/connections/assign GUILD_ROLE_CONNECTIONS_CONFIGURATION /guilds/{0}/roles/{1}/connections/configuration GUILD_ROLE_CONNECTIONS_ELIGIBILITY /guilds/{0}/roles/{1}/connections/eligibility GUILD_ROLE_CONNECTIONS_UNASSIGN /guilds/{0}/roles/{1}/connections/unassign GUILD_ROLE_MEMBER_IDS /guilds/{0}/roles/{1}/member-ids GUILD_ROLE_MEMBERS /guilds/{0}/roles/{1}/members GUILD_EVENTS_FOR_GUILD /guilds/{0}/scheduled-events GUILD_EVENT /guilds/{0}/scheduled-events/{1} GUILD_EVENT_USERS /guilds/{0}/scheduled-events/{1}/users USER_GUILD_EVENT /guilds/{0}/scheduled-events/{1}/users/@me GUILD_SOUNDBOARD_SOUNDS /guilds/{0}/soundboard-sounds GUILD_SOUNDBOARD_SOUND /guilds/{0}/soundboard-sounds/{1} GUILD_SPLASH /guilds/{0}/splashes/{1}.jpg GUILD_STICKER_PACKS /guilds/{0}/stickers GUILD_STICKER /guilds/{0}/stickers/{1} GUILD_TEMPLATES /guilds/{0}/templates GUILD_TEMPLATE /guilds/{0}/templates/{1} TOP_EMOJIS_FOR_GUILD /guilds/{0}/top-emojis GUILD_TOP_READ_CHANNELS /guilds/{0}/top-read-channels GUILD_MEMBER_AVATAR /guilds/{0}/users/{1}/avatars/{2}.{3} GUILD_MEMBER_BANNER /guilds/{0}/users/{1}/banners/{2}.{3} GUILD_VANITY_URL /guilds/{0}/vanity-url UPDATE_VOICE_STATE /guilds/{0}/voice-states/{1} GUILD_WEBHOOKS /guilds/{0}/webhooks GUILD_WELCOME_SCREEN /guilds/{0}/welcome-screen GUILD_WIDGET /guilds/{0}/widget HUB_WAITLIST_SIGNUP /hub-waitlist/signup HYPESQUAD_ONLINE /hypesquad/online INTEGRATIONS /integrations INTEGRATION_JOIN /integrations/{0}/join INTEGRATION_SEARCH /integrations/{0}/search INTERACTIONS /interactions INVITE /invites/{0} LOBBIES /lobbies LOBBY_SEARCH /lobbies/search LOBBY /lobbies/{0} LOBBY_MEMBER /lobbies/{0}/members/{1} LOBBY_SEND /lobbies/{0}/send METRICS /metrics NETWORKING_TOKEN /networking/token OAUTH2_CURRENT_AUTH /oauth2/@me OAUTH2_WHITELIST_ACCEPT /oauth2/allowlist/accept APPLICATION_ASSETS /oauth2/applications/{0}/assets APPLICATION_RPC /oauth2/applications/{0}/rpc OAUTH2_AUTHORIZE /oauth2/authorize OAUTH2_AUTHORIZE_WEBHOOK_CHANNELS /oauth2/authorize/webhook-channels OAUTH2_DEVICE_FINISH /oauth2/device/finish OAUTH2_DEVICE_VERIFY /oauth2/device/verify OAUTH2_AUTHORIZE_SAMSUNG /oauth2/samsung/authorize OAUTH2_AUTHORIZE_SAMSUNG_CALLBACK /oauth2/samsung/authorize/callback OAUTH2_TOKENS /oauth2/tokens OAUTH2_TOKEN /oauth2/tokens/{0} OUTBOUND_PROMOTIONS /outbound-promotions OUTBOUND_PROMOTIONS_PREVIEW /outbound-promotions/preview CLAIM_OUTBOUND_PROMOTION_CODE /outbound-promotions/{0}/claim PARTNERS_APPLY /partners/apply PARTNERS_CONNECTIONS /partners/connections PARTNER_REQUIREMENTS /partners/{0}/requirements RESEND_PHONE /phone-verifications/resend VERIFY_PHONE_FOR_TICKET /phone-verifications/validate-support-ticket VERIFY_PHONE /phone-verifications/verify BUG_REPORTS /private/bug-reports FUNIMATION_PROMOTION /promotions/funimation BULK_ACK /read-states/ack-bulk REPORT_OPTIONS /report/options GET_REPORT_MENU /reporting/menu/{0} SUBMIT_REPORT_MENU /reporting/{0} REPORT_V2 /reports STAGE_REPORT /reports/channels/{0}/messages/{1} ROLE_ICON /roles/{0}/icons/{1}.png TRACK /science SOUNDBOARD_SOUND /soundboard-sounds/{0} SSO /sso SSO_TOKEN /sso-token STAGE_INSTANCES /stage-instances STAGE_INSTANCES_EXTRA /stage-instances/extra STAGE_INSTANCE /stage-instances/{0} STICKER_PACKS /sticker-packs STORE_DIRECTORY_LAYOUT_STICKER_PACKS /sticker-packs/directory-v2/{0} STICKER_PACK /sticker-packs/{0} STICKER /stickers/{0} STICKER_ASSET /stickers/{0}.{1} STICKER_GUILD_DATA /stickers/{0}/guild STORE_ASSET /store/applications/{0}/assets/{1}.{2} STORE_DIRECTORY_LAYOUT /store/directory-layouts/{0} STORE_DIRECTORY /store/directory/{0} STORE_EMAIL_RESEND_PAYMENT_VERIFICATION /store/email/resend-payment-verification STORE_EULA /store/eulas/{0} STORE_LISTING /store/listings/{0} PRICE_TIERS /store/price-tiers STORE_PUBLISHED_LISTINGS_APPLICATIONS /store/published-listings/applications STORE_PUBLISHED_LISTINGS_APPLICATION /store/published-listings/applications/{0} STORE_PUBLISHED_LISTINGS_SKUS /store/published-listings/skus STORE_PUBLISHED_LISTINGS_SKU /store/published-listings/skus/{0} STORE_PUBLISHED_LISTINGS_SKU_JOIN_GUILD /store/published-listings/skus/{0}/guild/join STORE_PUBLISHED_LISTINGS_SUBSCRIPTION_PLANS /store/published-listings/skus/{0}/subscription-plans STORE_SKU /store/skus/{0} STORE_LISTINGS_SKU /store/skus/{0}/listings STORE_SKU_PURCHASE /store/skus/{0}/purchase STREAM_NOTIFY /streams/{0}/notify STREAM_PREVIEW /streams/{0}/preview STREAM /streams/{0}/stream SUBSCRIPTION_PLAN_GUILD_ROLE_GROUP_LISTING /subscription-plans/{0}/guild-role-subscription-group-listing SUBSCRIPTION_PLAN_GROUP_LISTING /subscription-plans/{0}/subscription-group-listing TEAMS /teams GUILD_TEMPLATE_ICON /templates/{0}/icons/{1}.{2} TENOR_ASSET_PATH /tenor TUTORIAL_INDICATORS /tutorial/indicators TUTORIAL_INDICATORS_SUPPRESS /tutorial/indicators/suppress TUTORIAL_INDICATOR /tutorial/indicators/{0} UNVERIFIED_APPLICATIONS /unverified-applications UNVERIFIED_APPLICATIONS_ICONS /unverified-applications/icons USERS /users ME /users/@me USER_ACTIVITY_STATISTICS /users/@me/activities/statistics/applications GUILD_AFFINITIES /users/@me/affinities/guilds USER_AFFINITIES /users/@me/affinities/users USER_AGREEMENTS /users/@me/agreements APPLICATION_USER_ROLE_CONNECTIONS /users/@me/applications/role-connections USER_ACHIEVEMENTS /users/@me/applications/{0}/achievements ENTITLEMENT_TICKET /users/@me/applications/{0}/entitlement-ticket ENTITLEMENTS_FOR_APPLICATION /users/@me/applications/{0}/entitlements APPLICATION_TICKET /users/@me/applications/{0}/ticket BILLING_COUNTRY_CODE /users/@me/billing/country-code ELIGIBLE_APPLICATION_SUBSCRIPTION_GUILDS /users/@me/billing/eligible-application-subscription-guilds BILLING_LOCALIZED_PROMO /users/@me/billing/localized-pricing-promo BILLING_PAYMENT_SOURCES /users/@me/billing/payment-sources BILLING_PAYMENT_SOURCES_VALIDATE_BILLING_ADDRESS /users/@me/billing/payment-sources/validate-billing-address BILLING_PAYMENT_SOURCE /users/@me/billing/payment-sources/{0} BILLING_PAYMENTS /users/@me/billing/payments BILLING_PAYMENT /users/@me/billing/payments/{0} BILLING_PAYMENTS_REFUND /users/@me/billing/payments/{0}/refund BILLING_PAYMENTS_VOID /users/@me/billing/payments/{0}/void BILLING_PAYPAL_BILLING_AGREEMENT_TOKENS /users/@me/billing/paypal/billing-agreement-tokens BILLING_STRIPE_PAYMENT_INTENTS /users/@me/billing/stripe/payment-intents/payments/{0} BILLING_STRIPE_PAYMENT_INTENTS_VIA_ID /users/@me/billing/stripe/payment-intents/{0} BILLING_STRIPE_SETUP_INTENT_SECRET /users/@me/billing/stripe/setup-intents BILLING_SUBSCRIPTIONS /users/@me/billing/subscriptions BILLING_SUBSCRIPTIONS_PREVIEW /users/@me/billing/subscriptions/preview BILLING_SUBSCRIPTION /users/@me/billing/subscriptions/{0} BILLING_SUBSCRIPTION_INVOICE /users/@me/billing/subscriptions/{0}/invoices BILLING_INVOICE_MANUAL_PAYMENT /users/@me/billing/subscriptions/{0}/invoices/{1}/pay BILLING_SUBSCRIPTION_PREVIEW /users/@me/billing/subscriptions/{0}/preview USER_TRIAL_OFFER /users/@me/billing/user-trial-offer USER_TRIAL_OFFER_ACKNOWLEDGED /users/@me/billing/user-trial-offer/{0}/ack CAPTCHA /users/@me/captcha/verify USER_CHANNELS /users/@me/channels CONNECTIONS /users/@me/connections CONNECTION_SYNC_CONTACTS /users/@me/connections/contacts/@me/external-friend-list-entries CONNECTION_SYNC_CONTACTS_SETTINGS /users/@me/connections/contacts/@me/external-friend-list-entries/settings CONNECTION /users/@me/connections/{0}/{1} CONNECTION_ACCESS_TOKEN /users/@me/connections/{0}/{1}/access-token CONNECTION_REFRESH /users/@me/connections/{0}/{1}/refresh SETTINGS_CONSENT /users/@me/consent DELETE_ACCOUNT /users/@me/delete DEVICES /users/@me/devices DEVICES_SYNC /users/@me/devices/sync DEVICES_SYNC_TOKEN /users/@me/devices/sync-token DISABLE_ACCOUNT /users/@me/disable USER_EMAIL /users/@me/email EMAIL_SETTINGS /users/@me/email-settings USER_EMAIL_VERIFY_CODE /users/@me/email/verify-code ENTITLEMENTS_FOR_USER /users/@me/entitlements USER_GIFT_CODE_CREATE /users/@me/entitlements/gift-codes USER_GIFT_CODES /users/@me/entitlements/gift-codes USER_GIFT_CODE_REVOKE /users/@me/entitlements/gift-codes/{0} ENTITLEMENTS_GIFTABLE /users/@me/entitlements/gifts USER_GUILD_BOOST_SLOTS /users/@me/guilds/premium/subscription-slots USER_GUILD_BOOST_SLOT_CANCEL /users/@me/guilds/premium/subscription-slots/{0}/cancel USER_GUILD_BOOST_SLOT_UNCANCEL /users/@me/guilds/premium/subscription-slots/{0}/uncancel USER_APPLIED_GUILD_BOOSTS /users/@me/guilds/premium/subscriptions APPLIED_GUILD_BOOST_COOLDOWN /users/@me/guilds/premium/subscriptions/cooldown GUILD_LEAVE /users/@me/guilds/{0} USER_GUILD_SETTINGS /users/@me/guilds/{0}/settings USER_HARVEST /users/@me/harvest FRIEND_INVITES /users/@me/invites USER_JOIN_REQUEST_GUILDS /users/@me/join-request-guilds LIBRARY /users/@me/library LIBRARY_APPLICATION_DELETE /users/@me/library/{0} LIBRARY_APPLICATION_BRANCH /users/@me/library/{0}/{1} LIBRARY_APPLICATION_INSTALLED /users/@me/library/{0}/{1}/installed MENTIONS /users/@me/mentions MENTIONS_MESSAGE_ID /users/@me/mentions/{0} MESSAGE_REQUESTS_SUPPLEMENTAL_DATA /users/@me/message-requests/supplemental-data MFA_CODES_VERIFICATION /users/@me/mfa/codes-verification MFA_SMS_DISABLE /users/@me/mfa/sms/disable MFA_SMS_ENABLE /users/@me/mfa/sms/enable MFA_TOTP_DISABLE /users/@me/mfa/totp/disable MFA_TOTP_ENABLE /users/@me/mfa/totp/enable MFA_WEBAUTHN_CREDENTIALS /users/@me/mfa/webauthn/credentials MFA_WEBAUTHN_CREDENTIAL /users/@me/mfa/webauthn/credentials/{0} NOTES /users/@me/notes NOTE /users/@me/notes/{0} NOTIF_CENTER_ITEMS /users/@me/notification-center/items/{0} NOTIF_CENTER_ITEMS_ACK /users/@me/notification-center/items/{0}/ack CLAIMED_OUTBOUND_PROMOTION_CODES /users/@me/outbound-promotions/codes PHONE /users/@me/phone PHONE_VERIFY_NO_PASSWORD /users/@me/phone/verify PREMIUM_USAGE /users/@me/premium-usage USER_BULK_RELATIONSHIPS /users/@me/relationships/bulk USER_RELATIONSHIP /users/@me/relationships/{0} REMOTE_AUTH_INITIALIZE /users/@me/remote-auth REMOTE_AUTH_CANCEL /users/@me/remote-auth/cancel REMOTE_AUTH_FINISH /users/@me/remote-auth/finish REMOTE_AUTH_LOGIN /users/@me/remote-auth/login USER_GUILD_EVENTS /users/@me/scheduled-events SETTINGS /users/@me/settings USER_SETTINGS_PROTO /users/@me/settings-proto/{0} USER_GAMES_NOTIFICATIONS /users/@me/settings/game-notifications USER_GAMES_NOTIFICATIONS_OVERRIDES /users/@me/settings/game-notifications/overrides USER_STICKER_PACKS /users/@me/sticker-packs USER_SURVEY /users/@me/survey VIDEO_FILTER_ASSETS /users/@me/video-filters/assets VIDEO_FILTER_ASSET /users/@me/video-filters/assets/{0} VIDEO_FILTER_ASSET_LAST_USED /users/@me/video-filters/assets/{0}/last-used USER_NON_CHANNEL_ACK /users/@me/{1}/{0}/ack DISABLE_EMAIL_NOTIFICATIONS /users/disable-email-notifications DISABLE_SERVER_HIGHLIGHT_NOTIFICATIONS /users/disable-server-highlight-notifications USER /users/{0} USER_ACHIEVEMENTS_FOR_USER /users/{0}/applications/{1}/achievements/{2} AVATAR_DECORATIONS /users/{0}/avatar-decorations/{1}.{2} AVATAR /users/{0}/avatars/{1}.{2} USER_BANNER /users/{0}/banners/{1}.{2} USER_PROFILE /users/{0}/profile USER_RELATIONSHIPS /users/{0}/relationships USER_ACTIVITY_JOIN /users/{0}/sessions/{1}/activities/{2}/JOIN USER_ACTIVITY_METADATA /users/{0}/sessions/{1}/activities/{2}/metadata VIDEO_FILTER_ASSET_STORAGE /users/{0}/video-filter-assets/{1}/{2}.{3} WEBHOOK /webhooks/{0} WEBHOOK_INTEGRATION /webhooks/{0}/{1}"},{"location":"backend/gateway/","title":"Gateway","text":""},{"location":"backend/gateway/#gateway-opcodes","title":"Gateway opcodes","text":"Code Name Sent by Description 0 DISPATCH server An event was dispatched. 1 HEARTBEAT client/server Fired periodically by the client to keep the connection alive. 2 IDENTIFY client Starts a new session during the initial handshake. 3 PRESENCE_UPDATE client Update the client's presence. 4 VOICE_STATE_UPDATE client Used to join/leave or move between voice channels. 5 VOICE_SERVER_PING 6 RESUME client Resume a previous session that was disconnected. 7 RECONNECT server You should attempt to reconnect and resume immediately. 8 REQUEST_GUILD_MEMBERS client Request information about offline guild members in a large guild. 9 INVALID_SESSION server The session has been invalidated. You should reconnect and identify/resume accordingly. 10 HELLO server Sent immediately after connecting, contains the heartbeat_interval to use. 11 HEARTBEAT_ACK server Sent in response to receiving a heartbeat to acknowledge that it has been received. 13 CALL_CONNECT 14 GUILD_SUBSCRIPTIONS 15 LOBBY_CONNECT 16 LOBBY_DISCONNECT 17 LOBBY_VOICE_STATES_UPDATE 18 STREAM_CREATE 19 STREAM_DELETE 20 STREAM_WATCH 21 STREAM_PING 22 STREAM_SET_PAUSED 24 REQUEST_GUILD_APPLICATION_COMMANDS 25 EMBEDDED_ACTIVITY_LAUNCH 26 EMBEDDED_ACTIVITY_CLOSE 27 EMBEDDED_ACTIVITY_UPDATE 28 REQUEST_FORUM_UNREADS 29 REMOTE_COMMAND 30 GET_DELETED_ENTITY_IDS_NOT_MATCHING_HASH"},{"location":"backend/gateway/#gateway-dispatch-events","title":"Gateway dispatch events","text":"Name Description ACTIVITY_START ACTIVITY_USER_ACTION APPLICATION_COMMAND_AUTOCOMPLETE_RESPONSE APPLICATION_COMMAND_PERMISSIONS_UPDATE Application command permission was updated AUTH_SESSION_CHANGE BILLING_POPUP_BRIDGE_CALLBACK CALL_CREATE CALL_DELETE CALL_UPDATE CHANNEL_CREATE New guild channel created CHANNEL_DELETE Channel was deleted CHANNEL_PINS_ACK CHANNEL_PINS_UPDATE Message was pinned or unpinned CHANNEL_RECIPIENT_ADD CHANNEL_RECIPIENT_REMOVE CHANNEL_UPDATE Channel was updated CONSOLE_COMMAND_UPDATE DELETED_ENTITY_IDS EMBEDDED_ACTIVITY_UPDATE ENTITLEMENT_CREATE ENTITLEMENT_DELETE ENTITLEMENT_UPDATE FORUM_UNREADS FRIEND_SUGGESTION_CREATE FRIEND_SUGGESTION_DELETE GENERIC_PUSH_NOTIFICATION_SENT GIFT_CODE_CREATE GIFT_CODE_UPDATE GUILD_APPLICATION_COMMAND_INDEX_UPDATE GUILD_BAN_ADD User was banned from a guild GUILD_BAN_REMOVE User was unbanned from a guild GUILD_CREATE Lazy-load for unavailable guild, guild became available, or user joined a new guild GUILD_DELETE Guild became unavailable, or user left/was removed from a guild GUILD_DIRECTORY_ENTRY_CREATE GUILD_DIRECTORY_ENTRY_DELETE GUILD_DIRECTORY_ENTRY_UPDATE GUILD_EMOJIS_UPDATE Guild emojis were updated GUILD_FEATURE_ACK GUILD_INTEGRATIONS_UPDATE Guild integration was updated GUILD_JOIN_REQUEST_CREATE GUILD_JOIN_REQUEST_DELETE GUILD_JOIN_REQUEST_UPDATE GUILD_MEMBERS_CHUNK Response to Request Guild Members GUILD_MEMBER_ADD New user joined a guild GUILD_MEMBER_LIST_UPDATE GUILD_MEMBER_REMOVE User was removed from a guild GUILD_MEMBER_UPDATE Guild member was updated GUILD_ROLE_CREATE Guild role was created GUILD_ROLE_DELETE Guild role was deleted GUILD_ROLE_UPDATE Guild role was updated GUILD_SCHEDULED_EVENT_CREATE Guild scheduled event was created GUILD_SCHEDULED_EVENT_DELETE Guild scheduled event was deleted GUILD_SCHEDULED_EVENT_UPDATE Guild scheduled event was updated GUILD_SCHEDULED_EVENT_USER_ADD User subscribed to a guild scheduled event GUILD_SCHEDULED_EVENT_USER_REMOVE User unsubscribed from a guild scheduled event GUILD_STICKERS_UPDATE Guild stickers were updated GUILD_UPDATE Guild was updated INTERACTION_CREATE User used an interaction, such as an Application Command INTERACTION_FAILURE INTERACTION_MODAL_CREATE INTERACTION_SUCCESS LIBRARY_APPLICATION_UPDATE LOBBY_CREATE LOBBY_DELETE LOBBY_MEMBER_CONNECT LOBBY_MEMBER_DISCONNECT LOBBY_MEMBER_UPDATE LOBBY_MESSAGE LOBBY_UPDATE LOBBY_VOICE_SERVER_UPDATE LOBBY_VOICE_STATE_UPDATE MESSAGE_ACK MESSAGE_CREATE Message was created MESSAGE_DELETE Message was deleted MESSAGE_DELETE_BULK Multiple messages were deleted at once MESSAGE_REACTION_ADD User reacted to a message MESSAGE_REACTION_REMOVE User removed a reaction from a message MESSAGE_REACTION_REMOVE_ALL All reactions were explicitly removed from a message MESSAGE_REACTION_REMOVE_EMOJI All reactions for a given emoji were explicitly removed from a message MESSAGE_UPDATE Message was edited NOTIFICATION_CENTER_ITEMS_ACK NOTIFICATION_CENTER_ITEM_COMPLETED NOTIFICATION_CENTER_ITEM_CREATE NOTIFICATION_CENTER_ITEM_DELETE OAUTH2_TOKEN_REVOKE PASSIVE_UPDATE_V1 PAYMENT_UPDATE PRESENCES_REPLACE PRESENCE_UPDATE User was updated READY Contains the initial state information READY_SUPPLEMENTAL RECENT_MENTION_DELETE RELATIONSHIP_ADD RELATIONSHIP_REMOVE RELATIONSHIP_UPDATE RESUMED Response to Resume SESSIONS_REPLACE STAGE_INSTANCE_CREATE Stage instance was created STAGE_INSTANCE_DELETE Stage instance was deleted or closed STAGE_INSTANCE_UPDATE Stage instance was updated STREAM_CREATE STREAM_DELETE STREAM_SERVER_UPDATE STREAM_UPDATE THREAD_CREATE Thread created, also sent when being added to a private thread THREAD_DELETE Thread was deleted THREAD_LIST_SYNC Sent when gaining access to a channel, contains all active threads in that channel THREAD_MEMBERS_UPDATE Some user(s) were added to or removed from a thread THREAD_MEMBER_LIST_UPDATE THREAD_MEMBER_UPDATE Thread member for the current user was updated THREAD_UPDATE Thread was updated TYPING_START User started typing in a channel USER_ACHIEVEMENT_UPDATE USER_CONNECTIONS_LINK_CALLBACK USER_CONNECTIONS_UPDATE USER_GUILD_SETTINGS_UPDATE USER_NON_CHANNEL_ACK USER_NOTE_UPDATE USER_PAYMENT_CLIENT_ADD USER_PAYMENT_SOURCES_UPDATE USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CREATE USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE USER_REQUIRED_ACTION_UPDATE USER_SETTINGS_PROTO_UPDATE USER_SUBSCRIPTIONS_UPDATE USER_UPDATE Properties about the user changed VOICE_CHANNEL_EFFECT_SEND VOICE_SERVER_UPDATE Guild's voice server was updated VOICE_STATE_UPDATE Someone joined, left, or moved a voice channel WEBHOOKS_UPDATE Guild channel webhook was created, update, or deleted"},{"location":"backend/voice/","title":"Voice connection","text":""},{"location":"backend/voice/#voice-connection-opcodes","title":"Voice connection opcodes","text":"Code Name Sent by Description 0 IDENTIFY client Begin a voice websocket connection. 1 SELECT_PROTOCOL client Select the voice protocol. 2 READY server Complete the websocket handshake. 3 HEARTBEAT client Keep the websocket connection alive. 4 SELECT_PROTOCOL_ACK server Describe the session. 5 SPEAKING client/server Indicate which users are speaking. 6 HEARTBEAT_ACK server Sent to acknowledge a received client heartbeat. 7 RESUME client Resume a connection. 8 HELLO server Time to wait between sending heartbeats in milliseconds. 9 RESUMED server Acknowledge a successful session resume. 12 VIDEO 13 CLIENT_DISCONNECT server A client has disconnected from the voice channel 14 SESSION_UPDATE 15 MEDIA_SINK_WANTS 16 VOICE_BACKEND_VERSION 17 CHANNEL_OPTIONS_UPDATE"},{"location":"notes/desktop-app/","title":"Desktop Application","text":""},{"location":"notes/desktop-app/#application","title":"Application","text":"<p>You can download the application at <code>https://dl.discordapp.net/apps/linux/&lt;version&gt;/discord-&lt;version&gt;.deb</code> <code>https://dl.discordapp.net/apps/osx/&lt;version&gt;/Discord.dmg</code> <code>https://dl.discordapp.net/distro/app/stable/win/x86/&lt;version&gt;/DiscordSetup.exe</code> </p> <p>Examples as of September 28, 2023: <code>https://dl.discordapp.net/apps/linux/0.0.30/discord-0.0.30.deb</code> <code>https://dl.discordapp.net/apps/osx/0.0.278/Discord.dmg</code> <code>https://dl.discordapp.net/distro/app/stable/win/x86/1.0.9018/DiscordSetup.exe</code> </p> <p>You can use the web archive to access old version codes.  </p>"},{"location":"notes/desktop-app/#native-modules","title":"Native Modules","text":"<p>You can download the modules at <code>https://dl.discordapp.net/apps/linux/&lt;version&gt;/modules/&lt;module name&gt;-&lt;module version&gt;.zip</code> <code>https://dl.discordapp.net/apps/osx/&lt;version&gt;/modules/&lt;module name&gt;-&lt;module version&gt;.zip</code> <code>https://dl.discordapp.net/distro/app/stable/win/x86/&lt;version&gt;/&lt;module name&gt;/&lt;module version&gt;/full.distro</code> </p> <p>Examples as of September 28, 2023: <code>https://dl.discordapp.net/apps/linux/0.0.30/modules/discord_desktop_core-1.zip</code> <code>https://dl.discordapp.net/apps/osx/0.0.278/modules/discord_desktop_core-1.zip</code> <code>https://dl.discordapp.net/distro/app/stable/win/x86/1.0.9018/discord_desktop_core/1/full.distro</code> </p>"},{"location":"notes/desktop-app/#downloading-script","title":"Downloading script","text":"<p>Here is a script that downloads all clients as of January 1, 2023, and all modules for all three platforms.  </p> Downloading script download.sh<pre><code>#!/bin/bash\nset -eu\n\n# release date: 2022-12-10\nVERSION_LINUX=\"0.0.22\"\n\n# release date: 2022-12-10\nVERSION_OSX=\"0.0.270\"\n\n# release date: 2022-12-09\nVERSION_WIN=\"1.0.9008\"\n\n# you can add additional module array for different version and copy-paste \"for\" below.\n#   MODULES_V2=\"discord_somenewmodule\"\n#\n# for example: version as of 2023-09-28 has module discord_voice version 4\n#   MODULES_V1=\"discord_cloudsync discord_desktop_core discord_dispatch discord_erlpack discord_game_utils discord_krisp discord_modules discord_rpc discord_spellcheck discord_utils\"\n#   MODULES_V4=\"discord_voice\"\n#   ...\n#   pushd modules\n#     for module in $MODULES_V1; do\n#       wget \"https://dl.discordapp.net/apps/linux/$VERSION_LINUX/modules/$module-1.zip\"\n#     done\n#\n#     for module in $MODULES_V4; do\n#       wget \"https://dl.discordapp.net/apps/linux/$VERSION_LINUX/modules/$module-4.zip\"\n#     done\n#   popd\nMODULES_V1=\"discord_cloudsync discord_desktop_core discord_dispatch discord_erlpack discord_game_utils discord_krisp discord_modules discord_rpc discord_spellcheck discord_utils discord_voice\"\n\n# create directories\nmkdir -p linux/modules\nmkdir -p osx/modules\nmkdir -p windows/modules\n\n# linux &amp; modules\npushd linux\n  wget \"https://dl.discordapp.net/apps/linux/$VERSION_LINUX/discord-$VERSION_LINUX.tar.gz\"\n\n  pushd modules\n    for module in $MODULES_V1; do\n      wget \"https://dl.discordapp.net/apps/linux/$VERSION_LINUX/modules/$module-1.zip\"\n    done\n  popd\npopd\n\n# osx &amp; modules\npushd osx\n  wget \"https://dl.discordapp.net/apps/osx/$VERSION_OSX/Discord.dmg\"\n\n  pushd modules\n    for module in $MODULES_V1; do\n      wget \"https://dl.discordapp.net/apps/osx/$VERSION_OSX/modules/$module-1.zip\"\n    done\n  popd\npopd\n\n# windows &amp; modules\npushd windows\n  wget \"https://dl.discordapp.net/distro/app/stable/win/x86/$VERSION_WIN/DiscordSetup.exe\"\n\n  pushd modules\n    for module in $MODULES_V1; do\n      wget \"https://dl.discordapp.net/distro/app/stable/win/x86/$VERSION_WIN/$module/1/full.distro\" -O \"$module.tar.br\"\n    done\n  popd\npopd\n</code></pre>"},{"location":"notes/experiments/","title":"Experiments","text":"<p>Experiments is used to test features that not yet ready to production.</p> <p>By default, experiments sent in the READY gateway event, but can be changed manually in the client settings.</p>"},{"location":"notes/experiments/#how-to-enable-manual-experiment-changing","title":"How to enable manual experiment changing","text":"<p>The following requirements must be met in order to enable the experiment overrides in the client settings:  </p> <ol> <li>You're need to be Discord Staff (public_flags = 1 &gt;&gt; 0)</li> <li>RELEASE_CHANNEL in GLOBAL_ENV must be \"staging\"</li> </ol>"},{"location":"notes/user-settings/","title":"User settings","text":""},{"location":"notes/user-settings/#explanation","title":"Explanation","text":"<p>I refer to these resourses as \"setting store\".</p>"},{"location":"notes/user-settings/#supported-setting-store-ids","title":"Supported setting store IDs","text":"Id Type Description 1 PRELOADED_USER_SETTINGS Discord Client settings (language, theme, etc) 2 FRECENCY_AND_FAVORITES_SETTINGS Frecency &amp; favorites of emojis, stickers, GIFs, application commands, etc 3 TEST_SETTINGS"},{"location":"notes/user-settings/#get-usersmesettings-protoid","title":"GET <code>/users/@me/settings-proto/:id</code>","text":"<p>Returns setting store from database</p> Request/response specification <p>Response: response.json<pre><code>{\n    \"settings\": \"protobuf-encoded data\"\n}\n</code></pre></p> Example request/response <p>Example response: example-response.json<pre><code>{\n    \"settings\": \"IhYKFP////////////////////////8P\"\n}\n</code></pre></p> <p>Decoded response: example-response-decoded.json<pre><code>PreloadedUserSettings {\n    userContent: UserContentSettings {\n        dismissedContents: &lt;Buffer ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff 0f&gt;\n    }\n}\n</code></pre></p> Example route pseudocode store-get.js<pre><code>server.patch(\"/api/v9/users/@me/settings-proto/:id\", (request, response) =&gt; {\n    // if :id == 1\n    const result = \"protobuf-encoded data\"; // SELECT preloaded_user_settings FROM users WHERE id = ${request.user.id}\n    response.json({ settings: result });\n});\n</code></pre>"},{"location":"notes/user-settings/#patch-usersmesettings-protoid","title":"PATCH <code>/users/@me/settings-proto/:id</code>","text":"<p>Merges setting store provided in body, with setting store stored in database, and returns modified setting store</p> Request/response specification <p>Request: request.json<pre><code>{\n    \"settings\": \"protobuf-encoded data\"\n}\n</code></pre></p> <p>Response: response.json<pre><code>{\n    \"settings\": \"protobuf-encoded data\"\n}\n</code></pre></p> Example request/response <p>Assuming that database state is \"IhYKFP////////////////////////8P\"</p> <p>Example request: example-request.json<pre><code>{\n    \"settings\": \"WgoKCAoGb25saW5l\"\n}\n</code></pre></p> <p>Decoded request: example-request-decoded.json<pre><code>PreloadedUserSettings {\n    status: StatusSettings {\n        status: StringValue {\n            value: 'online'\n        }\n    }\n}\n</code></pre></p> <p>Example response: example-response.json<pre><code>{\n    \"settings\": \"IhYKFP////////////////////////8PWgoKCAoGb25saW5l\"\n}\n</code></pre></p> <p>Decoded response: example-response-decoded.json<pre><code>{\n    userContent: UserContentSettings {\n        dismissedContents: &lt;Buffer ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff 0f&gt;\n    },\n\n    status: StatusSettings {\n        status: StringValue {\n            value: 'online'\n        }\n    }\n}\n</code></pre></p> Example merging code <p>Uses protobuf.js</p> merge.js<pre><code>import { loadSync } from \"protobufjs\";\n\n/////\n\nconst SETTINGS_PROTO =\n    loadSync(\"settings.proto\"); // file provided below, in \".proto specification\" section\n\nconst PRELOADED_USER_SETTINGS =\n    SETTINGS_PROTO.lookupType(\"discord_protos.discord_users.v1.PreloadedUserSettings\");\n\nconst FRECENCY_USER_SETTINGS =\n    SETTINGS_PROTO.lookupType(\"discord_protos.discord_users.v1.FrecencyUserSettings\");\n\n/////\n\nfunction mergeSettings(type, ...args) {\n    const new_settings = {};\n\n    /////\n\n    for (const arg of args) {\n        Object.assign(new_settings, type.decode(Buffer.from(arg, \"base64\")));\n    }\n\n    /////\n\n    return Buffer.from(type.encode(new_settings).finish()).toString(\"base64\");\n}\n\n/////\n\n// merge above example database state and request\n// prints: IhYKFP////////////////////////8PWgoKCAoGb25saW5l\nconsole.log(mergeSettings(PRELOADED_USER_SETTINGS, \"IhYKFP////////////////////////8P\", \"WgoKCAoGb25saW5l\"));\n</code></pre> Example route pseudocode store-patch.js<pre><code>server.patch(\"/api/v9/users/@me/settings-proto/:id\", (request, response) =&gt; {\n    // if :id == 1\n    const result = \"protobuf-encoded data\"; // SELECT preloaded_user_settings FROM users WHERE id = ${request.user.id}\n    const merged = mergeSettings(PRELOADED_USER_SETTINGS, result, request.body.settings);\n    // UPDATE users SET preloaded_user_settings = ${merged} WHERE id = ${request.user.id}\n    response.json({ settings: merged });\n});\n</code></pre>"},{"location":"notes/user-settings/#gateway-ready","title":"Gateway \"READY\"","text":"<p>On READY event, state of preloaded_user_settings must be sent to client. Or else, no settings will be present on client (all settings will be in default state).</p> Example pseudocode store-ready.js<pre><code>ws.send({\n    ...\n    v: 9,\n    user: {\n        // user info\n    },\n    user_settings_proto: \"protobuf-encoded data\", // SELECT preloaded_user_settings FROM users WHERE id = ${ws.user.id}\n    session_id: \"123456\",\n    ...\n});\n</code></pre>"},{"location":"notes/user-settings/#proto-specification","title":".proto specification","text":"<p>For <code>PRELOADED_USER_SETTINGS</code> use <code>discord_protos.discord_users.v1.PreloadedUserSettings</code> For <code>FRECENCY_AND_FAVORITES_SETTINGS</code> use <code>discord_protos.discord_users.v1.FrecencyUserSettings</code> </p> Specification settings.proto<pre><code>syntax = \"proto3\";\n\npackage discord_protos.discord_users.v1;\n\nimport \"google/protobuf/timestamp.proto\";\nimport \"google/protobuf/wrappers.proto\";\n\nenum GIFType {\n    NONE = 0;\n    IMAGE = 1;\n    VIDEO = 2;\n}\n\nenum InboxTab {\n    UNSPECIFIED = 0;\n    MENTIONS = 1;\n    UNREADS = 2;\n    TODOS = 3;\n    FOR_YOU = 4;\n}\n\nenum GuildActivityStatusRestrictionDefault {\n    OFF = 0;\n    ON_FOR_LARGE_GUILDS = 1;\n}\n\nenum FavoriteChannelType {\n    UNSET_FAVORITE_CHANNEL_TYPE = 0;\n    REFERENCE_ORIGINAL = 1;\n    CATEGORY = 2;\n}\n\nenum Theme {\n    UNSET = 0;\n    DARK = 1;\n    LIGHT = 2;\n}\n\nmessage FrecencyUserSettings {\n    discord_protos.discord_users.v1.Versions versions = 1;\n    discord_protos.discord_users.v1.FavoriteGIFs favorite_gifs = 2;\n    discord_protos.discord_users.v1.FavoriteStickers favorite_stickers = 3;\n    discord_protos.discord_users.v1.StickerFrecency sticker_frecency = 4;\n    discord_protos.discord_users.v1.FavoriteEmojis favorite_emojis = 5;\n    discord_protos.discord_users.v1.EmojiFrecency emoji_frecency = 6;\n    discord_protos.discord_users.v1.ApplicationCommandFrecency application_command_frecency = 7;\n}\n\nmessage FavoriteGIFs {\n    map&lt;string, discord_protos.discord_users.v1.FavoriteGIF&gt; gifs = 1;\n    bool hide_tooltip = 2;\n}\n\nmessage FavoriteGIF {\n    discord_protos.discord_users.v1.GIFType format = 1;\n    string src = 2;\n    uint32 width = 3;\n    uint32 height = 4;\n    uint32 order = 5;\n}\n\nmessage FavoriteStickers {\n    repeated fixed64 sticker_ids = 1;\n}\n\nmessage StickerFrecency {\n    map&lt;fixed64, discord_protos.discord_users.v1.FrecencyItem&gt; stickers = 1;\n}\n\nmessage FavoriteEmojis {\n    repeated string emojis = 1 [packed = false];\n}\n\nmessage EmojiFrecency {\n    map&lt;string, discord_protos.discord_users.v1.FrecencyItem&gt; emojis = 1;\n}\n\nmessage ApplicationCommandFrecency {\n    map&lt;string, discord_protos.discord_users.v1.FrecencyItem&gt; application_commands = 1;\n}\n\nmessage FrecencyItem {\n    uint32 total_uses = 1;\n    repeated uint64 recent_uses = 2;\n    int32 frecency = 3;\n    int32 score = 4;\n}\n\nmessage PreloadedUserSettings {\n    discord_protos.discord_users.v1.Versions versions = 1;\n    discord_protos.discord_users.v1.InboxSettings inbox = 2;\n    discord_protos.discord_users.v1.AllGuildSettings guilds = 3;\n    discord_protos.discord_users.v1.UserContentSettings user_content = 4;\n    discord_protos.discord_users.v1.VoiceAndVideoSettings voice_and_video = 5;\n    discord_protos.discord_users.v1.TextAndImagesSettings text_and_images = 6;\n    discord_protos.discord_users.v1.NotificationSettings notifications = 7;\n    discord_protos.discord_users.v1.PrivacySettings privacy = 8;\n    discord_protos.discord_users.v1.DebugSettings debug = 9;\n    discord_protos.discord_users.v1.GameLibrarySettings game_library = 10;\n    discord_protos.discord_users.v1.StatusSettings status = 11;\n    discord_protos.discord_users.v1.LocalizationSettings localization = 12;\n    discord_protos.discord_users.v1.AppearanceSettings appearance = 13;\n    discord_protos.discord_users.v1.GuildFolders guild_folders = 14;\n    discord_protos.discord_users.v1.Favorites favorites = 15;\n    discord_protos.discord_users.v1.AudioSettings audio_context_settings = 16;\n    discord_protos.discord_users.v1.CommunitiesSettings communities = 17;\n}\n\nmessage InboxSettings {\n    discord_protos.discord_users.v1.InboxTab current_tab = 1;\n    bool viewed_tutorial = 2;\n}\n\nmessage AllGuildSettings {\n    map&lt;fixed64, discord_protos.discord_users.v1.GuildSettings&gt; guilds = 1;\n}\n\nmessage GuildSettings {\n    map&lt;fixed64, discord_protos.discord_users.v1.ChannelSettings&gt; channels = 1;\n    uint32 hub_progress = 2;\n    uint32 guild_onboarding_progress = 3;\n    google.protobuf.Timestamp guild_recents_dismissed_at = 4;\n    bytes dismissed_guild_content = 5;\n}\n\nmessage ChannelSettings {\n    bool collapsed_in_inbox = 1;\n}\n\nmessage UserContentSettings {\n    bytes dismissed_contents = 1;\n    google.protobuf.StringValue last_dismissed_outbound_promotion_start_date = 2;\n    google.protobuf.Timestamp premium_tier_0_modal_dismissed_at = 3;\n}\n\nmessage VoiceAndVideoSettings {\n    discord_protos.discord_users.v1.VideoFilterBackgroundBlur blur = 1;\n    uint32 preset_option = 2;\n    discord_protos.discord_users.v1.VideoFilterAsset custom_asset = 3;\n    google.protobuf.BoolValue always_preview_video = 5;\n    google.protobuf.UInt32Value afk_timeout = 6;\n    google.protobuf.BoolValue stream_notifications_enabled = 7;\n    google.protobuf.BoolValue native_phone_integration_enabled = 8;\n}\n\nmessage TextAndImagesSettings {\n    google.protobuf.StringValue diversity_surrogate = 1;\n    google.protobuf.BoolValue use_rich_chat_input = 2;\n    google.protobuf.BoolValue use_thread_sidebar = 3;\n    google.protobuf.StringValue render_spoilers = 4;\n    repeated string emoji_picker_collapsed_sections = 5 [packed = false];\n    repeated string sticker_picker_collapsed_sections = 6 [packed = false];\n    google.protobuf.BoolValue view_image_descriptions = 7;\n    google.protobuf.BoolValue show_command_suggestions = 8;\n    google.protobuf.BoolValue inline_attachment_media = 9;\n    google.protobuf.BoolValue inline_embed_media = 10;\n    google.protobuf.BoolValue gif_auto_play = 11;\n    google.protobuf.BoolValue render_embeds = 12;\n    google.protobuf.BoolValue render_reactions = 13;\n    google.protobuf.BoolValue animate_emoji = 14;\n    google.protobuf.UInt32Value animate_stickers = 15;\n    google.protobuf.BoolValue enable_tts_command = 16;\n    google.protobuf.BoolValue message_display_compact = 17;\n    google.protobuf.UInt32Value explicit_content_filter = 19;\n    google.protobuf.BoolValue view_nsfw_guilds = 20;\n    google.protobuf.BoolValue convert_emoticons = 21;\n    google.protobuf.BoolValue expression_suggestions_enabled = 22;\n    google.protobuf.BoolValue view_nsfw_commands = 23;\n    google.protobuf.BoolValue use_legacy_chat_input = 24;\n}\n\nmessage NotificationSettings {\n    google.protobuf.BoolValue show_in_app_notifications = 1;\n    google.protobuf.BoolValue notify_friends_on_go_live = 2;\n    fixed64 notification_center_acked_before_id = 3;\n}\n\nmessage PrivacySettings {\n    google.protobuf.BoolValue allow_activity_party_privacy_friends = 1;\n    google.protobuf.BoolValue allow_activity_party_privacy_voice_channel = 2;\n    repeated fixed64 restricted_guild_ids = 3;\n    bool default_guilds_restricted = 4;\n    bool allow_accessibility_detection = 7;\n    google.protobuf.BoolValue detect_platform_accounts = 8;\n    google.protobuf.BoolValue passwordless = 9;\n    google.protobuf.BoolValue contact_sync_enabled = 10;\n    google.protobuf.UInt32Value friend_source_flags = 11;\n    google.protobuf.UInt32Value friend_discovery_flags = 12;\n    repeated fixed64 activity_restricted_guild_ids = 13;\n    discord_protos.discord_users.v1.GuildActivityStatusRestrictionDefault default_guilds_activity_restricted = 14;\n    repeated fixed64 activity_joining_restricted_guild_ids = 15;\n    repeated fixed64 message_request_restricted_guild_ids = 16;\n    google.protobuf.BoolValue default_message_request_restricted = 17;\n    google.protobuf.BoolValue drops_opted_out = 18;\n    google.protobuf.BoolValue non_spam_retraining_opt_in = 19;\n}\n\nmessage DebugSettings {\n    google.protobuf.BoolValue rtc_panel_show_voice_states = 1;\n}\n\nmessage GameLibrarySettings {\n    google.protobuf.BoolValue install_shortcut_desktop = 1;\n    google.protobuf.BoolValue install_shortcut_start_menu = 2;\n    google.protobuf.BoolValue disable_games_tab = 3;\n}\n\nmessage GuildFolder {\n    repeated fixed64 guild_ids = 1;\n    google.protobuf.Int64Value id = 2;\n    google.protobuf.StringValue name = 3;\n    google.protobuf.UInt64Value color = 4;\n}\n\nmessage FavoriteChannel {\n    string nickname = 1;\n    discord_protos.discord_users.v1.FavoriteChannelType type = 2;\n    uint32 position = 3;\n    fixed64 parent_id = 4;\n}\n\nmessage AudioContextSetting {\n    bool muted = 1;\n    float volume = 2;\n    fixed64 modified_at = 3;\n}\n\nmessage Versions {\n    uint32 client_version = 1;\n    uint32 server_version = 2;\n    uint32 data_version = 3;\n}\n\nmessage StatusSettings {\n    google.protobuf.StringValue status = 1;\n    discord_protos.discord_users.v1.CustomStatus custom_status = 2;\n    google.protobuf.BoolValue show_current_game = 3;\n}\n\nmessage LocalizationSettings {\n    google.protobuf.StringValue locale = 1;\n    google.protobuf.Int32Value timezone_offset = 2;\n}\n\nmessage AppearanceSettings {\n    discord_protos.discord_users.v1.Theme theme = 1;\n    bool developer_mode = 2;\n    discord_protos.discord_users.v1.ClientThemeSettings client_theme_settings = 3;\n}\n\nmessage GuildFolders {\n    repeated discord_protos.discord_users.v1.GuildFolder folders = 1;\n    repeated fixed64 guild_positions = 2;\n}\n\nmessage Favorites {\n    map&lt;fixed64, discord_protos.discord_users.v1.FavoriteChannel&gt; favorite_channels = 1;\n    bool muted = 2;\n}\n\nmessage AudioSettings {\n    map&lt;fixed64, discord_protos.discord_users.v1.AudioContextSetting&gt; user = 1;\n    map&lt;fixed64, discord_protos.discord_users.v1.AudioContextSetting&gt; stream = 2;\n}\n\nmessage CommunitiesSettings {\n    google.protobuf.BoolValue disable_home_auto_nav = 1;\n}\n\nmessage VideoFilterBackgroundBlur {\n    bool use_blur = 1;\n}\n\nmessage VideoFilterAsset {\n    fixed64 id = 1;\n    string asset_hash = 2;\n}\n\nmessage CustomStatus {\n    string text = 1;\n    fixed64 emoji_id = 2;\n    string emoji_name = 3;\n    fixed64 expires_at_ms = 4;\n}\n\nmessage ClientThemeSettings {\n    google.protobuf.UInt64Value primary_color = 1;\n}\n</code></pre>"}]}